<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=10">
    <title>负荷响应分析</title>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="stylesheet" href="bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="dist/css/ionicons.min.css">
    <link rel="stylesheet" href="dist/css/AdminLTE.css">
    <link rel="stylesheet" href="dist/css/skins/_all-skins.css">
    <link rel="stylesheet" href="vince/css/vince.css">
    <link rel="stylesheet" href="vince/biao/css/font-awesome.min.css">
    <!--[if lt IE 9]>
    <script src="dist/js/html5shiv.min.js"></script>
    <script src="dist/js/respond.min.js"></script>
    <![endif]-->
</head>
<body class="hold-transition skin-blue sidebar-mini">
<div class="wrapper">
    <header class="main-header">
        <a href="#" class="logo">
      <span class="logo-mini">
	  <img src="vince/images/v01.png">
	  </span>
            <span class="logo-lg"><img src="vince/images/v01.png">项目</span>
        </a>
        <nav class="navbar navbar-static-top">
            <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button"></a>
            <span class="all_title">华北理工大学能源优化调配及集群负荷控制系统</span>
            <div class="navbar-custom-menu">
                <ul class="nav navbar-nav">
                    <li class="dropdown user user-menu">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <img src="dist/img/user2-160x160.jpg" class="user-image" alt="User Image">
                            <span class="hidden-xs" id="right-admin-name">管理员</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li class="user-header">
                                <img src="dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">
                                <p id="right-second-admin">
                                    姓名：管理员
                                    <!--<small>部门：信息部</small>-->
                                </p>
                            </li>
                            <li class="user-footer">
                                <div class="pull-right">
                                    <a href="login.html" class="btn btn-default btn-flat">退出系统</a>
                                </div>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    <aside class="main-sidebar">
        <section class="sidebar">
            <div class="user-panel">
                <div class="pull-left image">
                    <img src="dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">
                </div>
                <div class="pull-left info">
                    <p id="adminTxt">当前用户：管理员</p>
                    <p class="menu_time">
                        时间：<span id="nowTime">2016-9-13 16:12:14</span></p>
                </div>
            </div>

            <ul class="sidebar-menu">
                <li class="header">菜单 MENU</li>
                <li>
                    <a href="index.html">
                        <i class="fa fa-home" style="font-size: 22px"></i> <span>首页</span>
                    </a>
                </li>
                <li>
                    <a href="ssjc.html">
                        <i class="fa fa-eye"></i> <span>实时监测</span>
                    </a>
                </li>
                <li>
                    <a href="yxjc.html">
                        <i class="fa fa-print"></i> <span>运行监测</span>
                    </a>
                </li>
                <li class="treeview active">
                    <a href="#">
                        <i class="fa fa-sliders"></i>
                        <span>负荷响应</span>
                        <span class="pull-right-container">
              <i class="fa fa-angle-left pull-right"></i>
            </span>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="xyxgpj.html"><i class="fa fa-bookmark"></i> 响应效果评价</a></li>
                        <li class="active"><a href="fhxyfx.html"><i class="fa fa-bookmark"></i> 负荷响应分析</a></li>

                        <li><a href="xyfagl.html"><i class="fa fa-bookmark"></i> 响应方案管理</a></li>
                    </ul>
                </li>

                <li>
                    <a href="yjgl.html">
                        <i class="fa fa-bell"></i> <span>预警管理</span>
                    </a>
                </li>
                <li class="treeview">
                    <a href="#">
                        <i class="fa fa-gears"></i>
                        <span>设备管理</span>
                        <span class="pull-right-container">
              <i class="fa fa-angle-left pull-right"></i>
            </span>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="sbrk.html"><i class="fa fa-bookmark"></i> 设备入库</a></li>
                        <li><a href="sbaz.html"><i class="fa fa-bookmark"></i> 设备安装</a></li>
                        <li><a href="sbjx.html"><i class="fa fa-bookmark"></i> 设备检修</a></li>
                        <li><a href="sbbf.html"><i class="fa fa-bookmark"></i> 设备报废</a></li>
                        <li><a href="sbcx.html"><i class="fa fa-bookmark"></i> 设备查询</a></li>
                    </ul>
                </li>
                <li>
                    <a href="kzcl.html">
                        <i class="fa fa-magnet"></i> <span>控制策略</span>
                    </a>
                </li>
                <li>
                    <a href="xtjc.html">
                        <i class="fa fa-map"></i> <span>系统集成</span>
                    </a>
                </li>
            </ul>
        </section>
    </aside>
    <div class="content-wrapper">
        <section class="content-header">
            <ol class="breadcrumb">
                <li><a href="#"><i class="fa fa-dashboard"></i> 首页</a></li>
                <li class="active">响应方案管理</li>
            </ol>
        </section>
        <div class="content qqq">
            <div class="ssjc">
                <div class="row">

                    <div class="col-md-12 ssjc_right">

                        <div class="xyfagl_right_up">
                            <div class="fhxyfx_title xyfa_title">
                      <span class="tiaoshijian">
                    数据时间：
                    <input type="text" class="shi" id="xuanshi1" value="2020-03-29">

                    <i class="glyphicon glyphicon-calendar fa fa-calendar"></i></span>


                                <span class="float_right">
                    <input type="button" value="查询" class="youcecha" id="query-btn">
                  </span>
                                <div class="clear"></div>
                            </div>
                            <div class="xyfagl_one">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="xyfagl_one_left">
                                            <p>当日响应完成情况</p>
                                            <select class="sdrk_select" style="width: 20%" id="select-strategy">

                                            </select>
                                            <div class="xyfagl_one_left_left">
                                                <p><span>响应方案:    </span><span id="left-response-name"></span></p>
                                                <p><span>响应策略：</span><span id="left-strategy-note"></span></p>
                                                <p><span>响应起止时间： </span><span
                                                        id="left-start-time">00:00-23:56</span></span></p>
                                                <p><span>响应目标：</span><span id="left-adjust-target"> </span></p>
                                                <p><span>实际响应负荷：</span><span id="left-completed"> </span></p>
                                                <p><span>奖励金额：</span><span id="left-bonus"></span></p>
                                            </div>
                                            <div class="xyfagl_one_left_right">
                                                <div class="echarts_xyxgpj_one" id="echarts_xyxgpj_one">
                                                </div>
                                            </div>
                                            <div class="clear"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="xyfagl_one_right">

                                            <div class="fhxyfx_yuanqie">
                                                <p>近5日响应情况对比</p>
                                                <div class="fhxyfx_ri">
                                                    <p>2016-9-16</p>
                                                    <div class="baibikuang">
                                                        <div class="baibi"><span class="baibi77"></span>
                                                        </div>
                                                        <span class="baibishu">77%</span></div>
                                                </div>
                                                <div class="fhxyfx_ri">
                                                    <p>2016-9-15</p>
                                                    <div class="baibikuang">
                                                        <div class="baibi"><span class="baibi27"></span>
                                                        </div>
                                                        <span class="baibishu">27%</span></div>
                                                </div>
                                                <div class="fhxyfx_ri">
                                                    <p>2016-9-14</p>
                                                    <div class="baibikuang">
                                                        <div class="baibi"><span class="baibi67"></span>
                                                        </div>
                                                        <span class="baibishu">67%</span></div>
                                                </div>
                                                <div class="fhxyfx_ri">
                                                    <p>2016-9-13</p>
                                                    <div class="baibikuang">
                                                        <div class="baibi"><span class="baibi47"></span>
                                                        </div>
                                                        <span class="baibishu">47%</span></div>
                                                </div>
                                                <div class="fhxyfx_ri">
                                                    <p>2016-9-12</p>
                                                    <div class="baibikuang">
                                                        <div class="baibi"><span class="baibi87"></span>
                                                        </div>
                                                        <span class="baibishu">87%</span></div>
                                                </div>
                                            </div>

                                            <div class="fhxyfx_qie">
                                                <p>2016-09-16响应完成情况 <span class="fhxyfx_fan"></span></p>
                                                <div class="xyfagl_one_left_left">
                                                    <p><span>响应方案:    </span><span
                                                            id="response-name">2016-09-16响应方案</span></p>
                                                    <p><span>响应策略：</span>夏季空调控制策略</p>
                                                    <p><span>响应起止时间： </span><span id="start-time">10:30-18:00</span></p>
                                                    <p><span>响应目标：</span><span id="adjust-target">1800KW </span></p>
                                                    <p><span>实际响应负荷：</span><span id="completed-power">1400KW </span></p>
                                                    <p><span>奖励金额：</span><span id="bonus-txt">0元</span></p>
                                                </div>
                                                <div class="xyfagl_one_left_right">
                                                    <div class="echarts_xyxgpj_three" id="echarts_xyxgpj_three">
                                                    </div>
                                                </div>
                                                <div class="clear"></div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="echarts_two">
                            <p>
                                实时负荷响应
                            </p>

                            <div class="echarts_xyxgpj_two" id="echarts_xyxgpj_two"></div>

                        </div>

                        <div class="fhxyfx_table">
                            <div class="ssjc_ru_title xyfa_title">
                  <span style="padding:0;">
                    数据列表：
                  </span>
                                <span class="float_right">
                    <input type="submit" value="导出" class="youcecha">
                  </span>

                                <div class="clear"></div>
                            </div>
                            <table class="tj_table" border="0">
                                <thead>
                                <tr>
                                    <td>日期</td>
                                    <td>方案名称</td>
                                    <td>策略名称</td>
                                    <td>响应起止时间</td>
                                    <td>响应目标</td>
                                    <td>实际响应</td>
                                    <td>完成度</td>
                                    <td>实际奖励</td>
                                </tr>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>2016-05-04</td>
                                    <td>2016年5月削峰方案</td>
                                    <td>q</td>
                                    <td>q</td>
                                    <td>q</td>
                                    <td>q</td>
                                    <td>q</td>
                                    <td>q</td>
                                </tr>
                                <tr>
                                    <td>2016-05-05</td>
                                    <td>2016年5月削峰方案</td>
                                    <td>q</td>
                                    <td>q</td>
                                    <td>q</td>
                                    <td>q</td>
                                    <td>q</td>
                                    <td>q</td>
                                </tr>
                                <tr>
                                    <td>2016-05-06</td>
                                    <td>2016年5月削峰方案</td>
                                    <td>q</td>
                                    <td>q</td>
                                    <td>q</td>
                                    <td>q</td>
                                    <td>q</td>
                                    <td>q</td>
                                </tr>

                                </tbody>

                            </table>
                            <div class="t_fanye">
                                <span class="upten"></span>
                                <span class="up"></span>
                                <span class="split"></span>
                                <span class="page_info_one">第 1 / 1 页</span>
                                <span class="split"></span>
                                <span class="dowm"></span>
                                <span class="downten"></span>
                                <span class="page_info_two">页记录数 15</span>
                                <span class="page_info_three">当前1-1条记录，共1条记录</span>
                                <div class="clear"></div>
                            </div>

                        </div>
                        <div class="cheng_ershi"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<footer class="main-footer">
    <div class="pull-right hidden-xs">
        <b></b>
    </div>
    <strong>Copyright &copy; 2014-2016</strong>
</footer>
<div class="control-sidebar-bg"></div>
</div>
<script src="plugins/jQuery/jquery-2.2.3.min.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
<script src="dist/js/app.min.js"></script>
<!--<script src="dist/js/demo.js"></script>-->
<script src="vince/js/nicescroll.js"></script>
<script src="vince/js/demo.js"></script>


<script src="vince/datapick/js/moment.js"></script>
<script src="vince/datapick/js/daterangepicker.js"></script>
<script type="text/javascript" src="vince/js/globalInfo.js"></script>
<script type="text/javascript" src="plugins/layer-v3.1.1/layer/layer.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#xuanshi1').daterangepicker({singleDatePicker: true}, function (start, end, label) {
            console.log(start.toISOString(), end.toISOString(), label);
        });
    });
</script>


<script src="vince/js/echarts.min.js"></script>
<script type="text/javascript">
    var myChart1 = echarts.init(document.getElementById('echarts_xyxgpj_one'));


    /* 第二个图 */
    var myChart2 = echarts.init(document.getElementById('echarts_xyxgpj_two'));


    // 第三个图
    var myChart3 = echarts.init(document.getElementById('echarts_xyxgpj_three'));
    option3 = {
        series: [{
            name: '负荷完成度',
            type: 'pie',
            radius: ['35%', '70%'],
            center: ['50%', '50%'],
            avoidLabelOverlap: false,
            label: {
                normal: {
                    show: true,
                    textStyle: {
                        fontSize: '24',
                        fontWeight: 'bold',
                        color: '#fff'
                    },
                    position: 'center'
                },
                emphasis: {
                    show: true,
                    textStyle: {
                        fontSize: '20',
                        fontWeight: 'bold',
                        color: '#fff'
                    }
                }
            },
            data: [
                {value: 67, name: '67%'},
                {value: 33, name: ''},],
            color: ['#55c45f', '#ff6b6b']
        }]
    };
    myChart3.setOption(option3);
    myChart1.resize();
    myChart2.resize();


    $(".fhxyfx_ri").click(function () {
        $(".fhxyfx_qie").css({"display": "block"})
        $(".fhxyfx_yuanqie").css({"display": "none"})
        myChart3.resize();
    })
    $(".fhxyfx_fan").click(function () {
        $(".fhxyfx_qie").css({"display": "none"})
        $(".fhxyfx_yuanqie").css({"display": "block"})
    })


    window.addEventListener("resize", function () {
        myChart1.resize();
        myChart2.resize();
        myChart3.resize();
    });

    var date = $('#xuanshi1');
    var select_strategy = $('#select-strategy');
    var data_list;

    $(function () {
        getInstalledPowerRating();

        showResponseSchemeList();
        $('#query-btn').click();
    });


    /**
     * 获取安装后的总额定功率
     */
    function getInstallTotalPower(arr) {
        $.getJSON(
            'ajax_install_total_power',
            function (data) {
                if (data.code == 11) {
                    layer.msg(data.msg, {icon: 1, time: 1000}, function () {
                        var installedArr = [];

                        for (var i = 0; i < 24; i++) {
                            installedArr[i] = data.installed_total_power.total_power
                        }
                        showOperationHourTotalPower(installedArr, arr);
                    });
                } else {
                    layer.msg(data.msg, {icon: 5, time: 1000});
                }
            }
        )

    }

    /**
     * 获取实际的功率
     */
    function getOperationHourTotalPower(today) {
        $.getJSON(
            'ajax_operation_hour_total_power',
            {
                operate_date: today
            },
            function (data) {
                if (data.code == 11) {
                    layer.msg(data.msg, {icon: 1, time: 1000}, function () {
                        var operationPowerArr = [
                            data.operation_hour_total_power.total_0.toFixed(1),
                            data.operation_hour_total_power.total_1.toFixed(1),
                            data.operation_hour_total_power.total_2.toFixed(1),
                            data.operation_hour_total_power.total_3.toFixed(1),
                            data.operation_hour_total_power.total_4.toFixed(1),
                            data.operation_hour_total_power.total_5.toFixed(1),
                            data.operation_hour_total_power.total_6.toFixed(1),
                            data.operation_hour_total_power.total_7.toFixed(1),
                            data.operation_hour_total_power.total_8.toFixed(1),
                            data.operation_hour_total_power.total_9.toFixed(1),
                            data.operation_hour_total_power.total_10.toFixed(1),
                            data.operation_hour_total_power.total_11.toFixed(1),
                            data.operation_hour_total_power.total_12.toFixed(1),
                            data.operation_hour_total_power.total_13.toFixed(1),
                            data.operation_hour_total_power.total_14.toFixed(1),
                            data.operation_hour_total_power.total_15.toFixed(1),
                            data.operation_hour_total_power.total_16.toFixed(1),
                            data.operation_hour_total_power.total_17.toFixed(1),
                            data.operation_hour_total_power.total_18.toFixed(1),
                            data.operation_hour_total_power.total_19.toFixed(1),
                            data.operation_hour_total_power.total_20.toFixed(1),
                            data.operation_hour_total_power.total_21.toFixed(1),
                            data.operation_hour_total_power.total_22.toFixed(1),
                            data.operation_hour_total_power.total_23.toFixed(1)
                        ];

                        getInstallTotalPower(operationPowerArr);

                    })
                } else {
                    layer.msg(data.msg, {icon: 5, time: 1000});
                }
            }
        )
    }

    /**
     * 获取已安装的设备的额定总功率
     */
    function getInstalledPowerRating() {
        $.getJSON(
            'ajax_install_list',
            {
                current_page: 0,
                etname: null,
                ctname: null,
                eetname: null,
                eid: null
            },
            function (data) {
                if (data.code == 11) {
                    $.each(data.installed_list, function (i, v) {
                        //假数据，实际功率以额定功率30%上下浮动
                        updateOperationMonitoring(v.eid, v.total_power)
                    })
                }
            }
        );
    }

    /**
     * 更新负荷数据
     */
    function updateOperationMonitoring(eid, total_power) {
        var today = getNowDate();


        if (today == '-undefined-undefined') {
            layer.msg('当前日期获取异常，请重新刷新', {icon: 5, time: 1000});
            return
        }
        $.ajax({
            url: 'ajax_operation_monitoring',
            data: {
                eid: eid,
                zero_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                one_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                two_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                three_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                four_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                five_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                six_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                seven_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                eight_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                nine_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                ten_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                eleven_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                twelve_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                thirteen_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                fourteen_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                fifteen_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                sixteen_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                seventeen_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                eighteen_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                nineteen_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                twenty_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                twentyone_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                twentytwo_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                twentythree_hour: (Math.random() * total_power * 1.3 + total_power * 0.7).toFixed(1),
                operate_date: today
            },
            dataType: "JSON",
            type: "GET",
            async: false
        }).done(function (data) {
            if (data.code == 41) {
                layer.msg(data.msg, {icon: 1, time: 1000})
            } else {
                layer.msg(data.msg, {icon: 5, time: 1000});
            }
        });


        getOperationHourTotalPower(today);
    }

    /**
     * 显示功率折线图
     * @param ratingPower
     * @param operationPower
     */
    function showOperationHourTotalPower(ratingPower, operationPower) {
        option2 = {
            textStyle: {color: '#fff'},
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b} : {c}'
            },
            legend: {
                orient: 'horizontal',
                right: '3%',
                top: '3%',
                data: ['基线负荷', '实际负荷'],
                textStyle: {color: '#fff'}
            },

            xAxis: {
                type: 'category',
                splitLine: {
                    show: true,
                    lineStyle: {
                        color: 'rgba(43,46,56,0.8)'
                    }
                },
                data: ['0时', '1时', '2时', '3时', '4时', '5时', '6时', '7时', '8时', '9时', '10时', '11时', '12时', '13时', '14时', '15时', '16时', '17时', '18时', '19时', '20时', '21时', '22时', '23时']
            },
            yAxis: {
                axisLabel: {
                    formatter: '{value} w'
                },
                splitLine: {
                    show: true,
                    lineStyle: {
                        color: 'rgba(43,46,56,0.8)'
                    }
                },
                scale: true
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            series: [
                {
                    name: '基线负荷',
                    type: 'line',
                    data: ratingPower,
                    markPoint: {
                        data: [
                            // {
                            //     name: '策略1开启时间',
                            //     coord: ['11时', 400],
                            //     name: '11时0分0秒',
                            //     value: '<br/>策略1开启',
                            //     label: {
                            //         normal: {
                            //             show: 'true'
                            //         }
                            //     }
                            // },
                            // {
                            //     name: '策略2开启时间',
                            //     coord: ['14时', 480],
                            //     name: '14时0分0秒',
                            //     value: '<br/>策略2开启'
                            // },
                            // {
                            //     name: '策略1关闭时间',
                            //     coord: ['16时', 300],
                            //     name: '16时0分0秒',
                            //     value: '<br/>策略1关闭'
                            // },
                            // {
                            //     name: '策略2关闭时间',
                            //     coord: ['18时', 300],
                            //     name: '18时0分0秒',
                            //     value: '<br/>策略2关闭'
                            // },
                        ]
                    },
                    symbol: 'circle',
                    symbolSize: 10,
                    lineStyle: {normal: {color: '#ff6b6b'}}
                },
                {
                    name: '实际负荷',
                    type: 'line',
                    data: operationPower,
                    symbol: 'circle',
                    symbolSize: 10,
                    lineStyle: {normal: {color: '#1571b0'}}
                }]
        };
        myChart2.setOption(option2);
    }


    /**
     * 显示所有响应方案的列表
     */
    function showResponseSchemeList() {
        select_strategy.empty();

        $('#query-btn').click(function () {
            $.getJSON(
                'ajax_response_scheme_list',
                {
                    scheme_name: '',
                    start_time: date.val(),
                    current_page: 0
                },
                function (data) {
                    console.log(data);
                    if (data.code == 11) {
                        select_strategy.empty();
                        data_list = data.response_scheme_list;

                        $.each(data.response_scheme_list, function (i, v) {
                            var option = $('<option></option>');
                            option.val(v.rsid);
                            option.text(v.scheme_name);
                            select_strategy.append(option);
                        });
                        getNote();
                        select_strategy.change();
                    } else {
                        layer.msg(data.msg, {icon: 5, time: 1000});
                    }
                }
            )
        });
    }

    var strategy_str;

    /**
     * 获取记录
     * @param scheme_name 方案名
     * @param adjust_target 调节目标
     * @param time 响应开始时间
     * @param completed 已完成目标
     * @param bonus 奖金
     */
    function getNote() {
        console.log(data_list);
        select_strategy.change(function () {
            $('#left-response-name').text(data_list[$(this).val() - 1].scheme_name);
            $('#left-start-time').text(data_list[$(this).val() - 1].time);
            $('#left-adjust-target').text(data_list[$(this).val() - 1].adjust_target);
            $('#left-completed').text(data_list[$(this).val() - 1].completed);
            $('#left-bonus').text(data_list[$(this).val() - 1].bonus);


            strategy_str = '';
            $.ajax({
                url: 'ajax_get_added_scheme_by_rsid',
                data: {
                    rsid: data_list[$(this).val() - 1].rsid
                },
                dataType: "JSON",
                type: "GET",
                async: false
            }).done(function (data) {
                if (data.code == 11) {
                    $.each(data.rs_and_cs, function (i, v) {
                        strategy_str = strategy_str + ((i + 1) + '.' + v.strategy_name) + '<br>';
                    });
                }
            });

            $('#left-strategy-note').html(strategy_str);

            var complete_percent = (data_list[$(this).val() - 1].completed / data_list[$(this).val() - 1].adjust_target * 100).toFixed(1);
            //负荷完成度饼图显示
            showLoadComplete(complete_percent, complete_percent + '%');
        })
    }

    function showLoadComplete(val, name) {
        option1 = {
            series: [{
                name: '负荷完成度',
                type: 'pie',
                radius: ['35%', '70%'],
                center: ['50%', '50%'],
                avoidLabelOverlap: false,
                label: {
                    normal: {
                        show: true,
                        textStyle: {
                            fontSize: '24',
                            fontWeight: 'bold',
                            color: '#fff'
                        },
                        position: 'center'
                    },
                    emphasis: {
                        show: true,
                        textStyle: {
                            fontSize: '20',
                            fontWeight: 'bold',
                            color: '#fff'
                        }
                    }
                },
                data: [
                    {value: val, name: name},
                    {value: 100 - val, name: ''},],
                color: ['#55c45f', '#ff6b6b']
            }]
        };
        myChart1.setOption(option1);
    }
</script>
</body>
</html>